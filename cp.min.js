jQuery.fn.flexdatalist=function(a,b){'use strict';var c=function(a,b){a.each(function(){var a=$(this),c=a.data(),d=c.flexdatalist,e=c.aliascontainer;e&&(a.removeClass("flexdatalist-set").attr({style:null,tabindex:null}).val(d&&d.originalValue&&!b?d.originalValue:"").removeData("flexdatalist").removeData("aliascontainer").off(),e.remove())})};if("string"==typeof a&&"reset"!==a){if("undefined"!=typeof this[0].fvalue){var d=this[0];if("destroy"===a)c(this,b);else if("value"===a){if("undefined"==typeof b)return d.fvalue.get();d.fvalue.set(b)}else if("add"===a){if("undefined"==typeof b)return d.debug("Missing value to add!");d.fvalue.add(b)}else if("toggle"===a){if("undefined"==typeof b)return d.debug("Missing value to toggle!");d.fvalue.toggle(b)}else if("remove"===a){if("undefined"==typeof b)return d.debug("Missing value to remove!");d.fvalue.remove(b)}else if("disabled"===a){if("undefined"==typeof b)return d.fdisabled();d.fdisabled(b)}else if("string"==typeof a){if("undefined"==typeof b)return d.options.get(a);d.options.set(a,b)}return this}a={_option:b}}0<this.length&&"undefined"!=typeof this[0].fvalue&&c(this);var e=$.extend({url:null,data:[],params:{},relatives:null,chainedRelatives:!1,cache:!0,cacheLifetime:60,minLength:2,groupBy:!1,selectionRequired:!1,focusFirstResult:!1,textProperty:null,valueProperty:null,visibleProperties:[],iconProperty:"thumb",searchIn:["label"],searchContain:!1,searchEqual:!1,searchByWord:!1,searchDisabled:!1,searchDelay:300,normalizeString:null,multiple:null,disabled:null,maxShownResults:50,removeOnBackspace:!0,noResultsText:"Kata kunci \"{keyword}\" tidak ditemukan",toggleSelected:!1,allowDuplicateValues:!1,redoSearchOnFocus:!0,requestType:"get",requestContentType:"x-www-form-urlencoded",resultsProperty:"results",keywordParamName:"keyword",limitOfValues:0,valuesSeparator:",",debug:!0},a);return this.each(function(a){var b=$(this),c=this,d=null,f=[],g="flex"+a,h=null,i=null;this.init=function(){var a=this.options.init();this.set.up(),h.on("focusin",function(a){c.action.redoSearchFocus(a),c.action.showAllResults(a),i&&i.addClass("focus")}).on("input keydown",function(a){9===c.keyNum(a)&&c.results.remove(),c.action.keypressValue(a,188),c.action.backSpaceKeyRemove(a)}).on("input keyup",function(a){c.action.keypressValue(a,13),c.action.keypressSearch(a),c.action.copyValue(a),c.action.backSpaceKeyRemove(a),c.action.showAllResults(a),c.action.clearValue(a),c.action.removeResults(a),c.action.inputWidth(a)}).on("focusout",function(a){i&&i.removeClass("focus"),c.action.clearText(a),c.action.clearValue(a)}),window.onresize=function(){c.position()},this.cache.gc(),a.selectionRequired&&c.fvalue.clear(!0,!0),this.fvalue._load(a.originalValue,function(){c.fdisabled(a.disabled),b.trigger("init:flexdatalist",[a])},!0)},this.action={keypressValue:function(a,b){var d=c.keyNum(a),e=h[0].value,f=c.options.get();if(0<e.length&&d===b&&!f.selectionRequired&&f.multiple){var e=h[0].value;a.preventDefault(),c.fvalue.extract(e),c.results.remove()}},keypressSearch:function(a){var b=c.keyNum(a),e=h.val(),f=e.length,g=c.options.get();clearTimeout(d),(!b||13!==b&&(37>b||40<b))&&(d=setTimeout(function(){(0===g.minLength&&0<f||0<g.minLength&&f>=g.minLength)&&c.data.load(function(a){c.search.get(e,a,function(a){c.results.show(a)})})},g.searchDelay))},redoSearchFocus:function(a){var b=c.fvalue.get(),d=c.options.get(),e=h.val();d.redoSearchOnFocus&&(0<e.length&&d.multiple||0<e.length&&0===b.length)&&this.keypressSearch(a)},copyValue:function(a){if(13!==c.keyNum(a)){var b=h.val(),d=c.fvalue.get(!0),e=c.options.get();e.multiple||e.selectionRequired||b.length===d.length||c.fvalue.extract(b)}},backSpaceKeyRemove:function(a){var b=c.options.get();if(b.removeOnBackspace&&b.multiple){var d=h.val(),e=h.data("_remove");8===c.keyNum(a)&&(0===d.length?e?(c.fvalue.remove(e),h.data("_remove",null)):(console.log("remove!"),h.data("_remove",h.parents("li:eq(0)").prev())):h.data("_remove",null))}},showAllResults:function(){var a=h.val();a=$.trim(a),""===a&&0===c.options.get("minLength")&&c.data.load(function(a){c.results.show(a)})},inputWidth:function(){var a=c.options.get();if(a.multiple){var d=h.val(),e=parseInt(h.css("fontSize").replace("px","")),f=b.innerWidth(),g=(d.length+1)*e;g>=40&&g<=f&&(h[0].style.width=g+"px")}},clearText:function(){var a=c.fvalue.get(),b=c.options.get();!b.multiple&&b.selectionRequired&&0===a.length&&(h[0].value="")},clearValue:function(){var a=c.fvalue.get(),b=h.val(),d=c.options.get();!d.multiple&&d.selectionRequired&&b.length<=d.minLength&&c.fvalue.clear()},removeResults:function(){var a=c.fvalue.get(),b=h.val(),d=c.options.get();0<d.minLength&&b.length<d.minLength&&c.results.remove()}},this.set={up:function(){h=this.alias(),c.options.get("multiple")?i=this.multipleInput(h):h.insertAfter(b),b.attr("autofocus")&&h.focus(),b.data("aliascontainer",i?i:h).addClass("flexdatalist flexdatalist-set").css({position:"absolute",top:-14e3,left:-14e3}).attr("tabindex",-1);var a=b.attr("id"),d=h.attr("id");$("label[for=\""+a+"\"]").attr("for",d),this.chained()},alias:function(){var a=b.attr("id")?b.attr("id")+"-flexdatalist":g,c=$("<input type=\"text\">").attr({class:b.attr("class"),name:b.attr("name")?"flexdatalist-"+b.attr("name"):null,id:a,placeholder:b.attr("placeholder")}).addClass("flexdatalist-alias "+a).removeClass("flexdatalist").attr("autocomplete","off");return c},multipleInput:function(a){return i=$("<ul tabindex=\"1\">").addClass("flexdatalist-multiple "+g).css({"border-color":b.css("border-left-color"),"border-width":b.css("border-left-width"),"border-style":b.css("border-left-style"),"border-radius":b.css("border-top-left-radius"),"background-color":b.css("background-color")}).insertAfter(b).click(function(){$(this).find("input").focus()}),$("<li class=\"input-container\">").addClass("flexdatalist-multiple-value").append(a).appendTo(i),i},chained:function(){var a=c.options.get();if(a.relatives&&a.chainedRelatives){var b=function(){a.relatives.each(function(){var a=c.isEmpty($(this).val()),b=c.isEmpty(c.value);(a||!b)&&c.fvalue.clear(),c.fdisabled(a)})};a.relatives.on("change",function(){b()}),b(!0)}}},this.fvalue={get:function(a){var b=c.value,d=c.options.get();return(d.multiple||this.isJSON())&&!a?this.toObj(b):b},set:function(a,d){return c.fdisabled()||(!d&&this.clear(!0),this._load(a)),b},add:function(a){return c.options.get("multiple")&&this.set(a,!0),this},toggle:function(a){return c.fdisabled()||this.multiple.toggle(a),this},remove:function(a){if(!c.fdisabled()){a=this.toObj(a),b.trigger("before:flexdatalist.remove",[a]);var d=[];if($.isArray(a))$.each(a,function(a,b){var e=c.fvalue.multiple.remove(b);e&&d.push(e)});else{var e=this.multiple.remove(a);e&&d.push(e)}b.trigger("after:flexdatalist.remove",[a,d]).trigger("change:flexdatalist",[d,c.options.get()]).trigger("change")}return this},_load:function(a,b,d){var e=c.options.get(),f=e.valueProperty,g=this.toStr(a),h=this.get(!0);return(b=b?b:$.noop,0==g.length&&0==h.length)?void b(a):(a=this.toObj(a),c.isEmpty(a)||c.isEmpty(f)||"*"===f?void(b(a),c.fvalue.extract(a,d)):(c.isObject(f)||(f=f.split(",")),void c.data.load(function(d){c.isObject(a)?!$.isArray(a)&&(a=[a]):a=a.split(",");for(var e,g=[],h=0;h<a.length;h++){e=a[h];for(var j,k=0;k<d.length;k++){j=d[k];for(var l=0;l<f.length;l++){var m=f[l],e=c.isDefined(e,m)?e[m]:e;c.isDefined(j,m)&&e===j[m]&&g.push(j)}}}0<g.length&&c.fvalue.extract(g,!0),b(a)},a)))},extract:function(a,d){var e=c.options.get(),f=[];d||b.trigger("before:flexdatalist.value",[a,e]),$.isArray(a)?$.each(a,function(a,b){f.push(c.fvalue._extract(b))}):f=c.fvalue._extract(a),d||b.trigger("after:flexdatalist.value",[f,e]).trigger("change:flexdatalist",[f,e]).trigger("change")},_extract:function(a){var b=this.text(a),d=this.value(a),e=c.value,g=c.options.get();if(!g.multiple)this.single(d,b);else if(!c.isEmpty(d)){if(c.isDup(d))return;f.push(d),this.multiple.add(d,b)}return{value:d,text:b}},single:function(a,b){b&&b!==h.val()&&(h[0].value=b),c.value=a},multiple:{add:function(a,b){var d=this,e=this.li(a,b),f=c.options.get();e.click(function(){d.toggle($(this))}).find(".fdl-remove").click(function(){c.fvalue.remove($(this).parent())}),this.push(a),h[0].value="",this.checkLimit()},push:function(a){var b=c.fvalue.get();a=c.fvalue.toObj(a),b.push(a),a=c.fvalue.toStr(b),c.value=a},toggle:function(a){var d=c.options.get();if(d.toggleSelected){var e=this.findLi(a);if(e){var f=e.index(),g=e.data(),h=e.hasClass("disabled")?"enable":"disable",i=c.fvalue.get(),j=[{value:g.value,text:g.text,action:h},d];if(b.trigger("before:flexdatalist.toggle",j),"enable"==h){var k=e.data("value");i.splice(f,0,k),e.removeClass("disabled")}else i.splice(f,1),e.addClass("disabled");i=c.fvalue.toStr(i),c.value=i,b.trigger("after:flexdatalist.toggle",j).trigger("change:flexdatalist",j).trigger("change")}}},remove:function(a){var b=this.findLi(a);if(b){var d=c.fvalue.get(),e=b.index(),g=b.data(),h=c.options.get(),i={value:g.value,text:g.text};return d.splice(e,1),d=c.fvalue.toStr(d),c.value=d,b.remove(),c.fvalue.multiple.checkLimit(),f.splice(e,1),i}},removeAll:function(){var a=c.fvalue.get(),d=c.options.get();b.trigger("before:flexdatalist.remove.all",[a,d]),i.find("li:not(.input-container)").remove(),c.value="",f=[],b.trigger("after:flexdatalist.remove.all",[a,d])},li:function(a,b){var d=i.find("li.input-container");return $("<li>").addClass("value"+(c.options.get("toggleSelected")?" toggle":"")).append("<span class=\"text\">"+b+"</span>").append("<span class=\"fdl-remove\">&times;</span>").data({text:b,value:c.fvalue.toObj(a)}).insertBefore(d)},checkLimit:function(){var a=c.options.get("limitOfValues");if(0<a){var b=i.find("li.input-container"),d=f.length;a==d?b.hide():b.show()}},findLi:function(a){if(!(a instanceof jQuery)){var b=a;a=null,i.find("li:not(.input-container)").each(function(){var c=$(this);if(c.data("value")===b)return a=c,!1})}else 0===a.length&&(a=null);return a},isEmpty:function(){return 0<this.get().length}},value:function(a){var b=a,d=c.options.get(),e=d.valueProperty;if(c.isObject(a))if(!(this.isJSON()||this.isMixed()))b=c.isDefined(a,e)?a[e]:c.isDefined(a,d.searchIn[0])?a[d.searchIn[0]]:null;else if(delete a.name_highlight,$.isArray(e)){for(var f={},g=0;g<e.length;g++)c.isDefined(a,e[g])&&(f[e[g]]=a[e[g]]);b=this.toStr(f)}else b=this.toStr(a);return b},text:function(a){var b=a,d=c.options.get();return c.isObject(a)&&(b=a[d.searchIn[0]],b=c.isDefined(a,d.textProperty)?a[d.textProperty]:this.placeholders.replace(a,d.textProperty,b)),$("<div>").html(b).text()},placeholders:{replace:function(a,b,d){if(c.isObject(a)&&"string"==typeof b){var e=this.parse(b);if(!c.isEmpty(a)&&e)return $.each(e,function(d,e){c.isDefined(a,e)&&(b=b.replace(d,a[e]))}),b}return d},parse:function(a){var b=a.match(/\{.+?\}/g);if(b){var c={};return b.map(function(a){c[a]=a.slice(1,-1)}),c}return!1}},clear:function(a,d){var e=c.value,g=c.options.get();return g.multiple&&this.multiple.removeAll(),c.value="",""===e||d||b.trigger("change:flexdatalist",[{value:"",text:""},g]).trigger("change"),a&&(h[0].value=""),f=[],this},toObj:function(a){if("object"!=typeof a){var b=c.options.get();c.isEmpty(a)||!c.isDefined(a)?a=b.multiple?[]:this.isJSON()?{}:"":this.isCSV()?(a=a.toString().split(b.valuesSeparator),a=$.map(a,function(a){return $.trim(a)})):(this.isMixed()||this.isJSON())&&this.isJSON(a)?a=JSON.parse(a):"number"==typeof a&&(a=a.toString())}return a},toStr:function(a){return"string"!=typeof a&&(c.isEmpty(a)||!c.isDefined(a)?a="":"number"==typeof a?a=a.toString():this.isCSV()?a=a.join(c.options.get("valuesSeparator")):(this.isJSON()||this.isMixed())&&(a=JSON.stringify(a))),$.trim(a)},isJSON:function(a){if("undefined"!=typeof a){if(c.isObject(a))a=JSON.stringify(a);else if("string"!=typeof a)return!1;return 0===a.indexOf("{")||0===a.indexOf("[{")}var b=c.options.get(),d=b.valueProperty;return c.isObject(d)||"*"===d},isMixed:function(){var a=c.options.get();return!a.selectionRequired&&"*"===a.valueProperty},isCSV:function(){return!this.isJSON()&&c.options.get("multiple")}},this.data={load:function(a,c){var d=this,e=[];b.trigger("before:flexdatalist.data"),this.url(function(c){e=e.concat(c),d.static(function(c){e=e.concat(c),d.datalist(function(c){e=e.concat(c),b.trigger("after:flexdatalist.data",[e]),a(e)})})},c)},static:function(a){var b=this,d=c.options.get();if("string"==typeof d.data){var e=d.data,f=c.cache.read(e,!0);if(f)return void a(f);this.remote({url:e,success:function(b){d.data=b,a(b),c.cache.write(e,b,d.cacheLifetime,!0)}})}else"object"!=typeof d.data&&(d.data=[]),a(d.data)},datalist:function(a){var d=b.attr("list"),e=[];c.isEmpty(d)||$("#"+d).find("option").each(function(){var a=$(this),b=a.val(),c=a.text();e.push({label:0<c.length?c:b,value:b})}),a(e)},url:function(a,b){var d=this,e=h.val(),f=c.options.get(),g=f.keywordParamName,i=c.fvalue.get(),j=this.relativesData();if(c.isEmpty(f.url))return a([]);var k={};"post"===f.requestType&&($.each(f,function(a,b){0==a.indexOf("_")||"data"==a||(k[a]=b)}),delete k.relatives);var l=c.cache.keyGen({relative:j,load:b,keyword:e,contain:f.searchContain},f.url),m=c.cache.read(l,!0);if(m)return void a(m);var n=$.extend(j,f.params,{load:b,contain:f.searchContain,selected:i,original:f.originalValue,options:k});n[g]=e,this.remote({url:f.url,data:n,success:function(b){var d=h.val();d.length>=e.length&&a(b),c.cache.write(l,b,f.cacheLifetime,!0)}})},remote:function(a){var d=this,e=c.options.get();b.hasClass("flexdatalist-loading")||(b.addClass("flexdatalist-loading"),"json"===e.requestContentType&&(a.data=JSON.stringify(a.data)),$.ajax($.extend({type:e.requestType,dataType:"json",contentType:"application/"+e.requestContentType+"; charset=UTF-8",complete:function(){b.removeClass("flexdatalist-loading")}},a,{success:function(b){b=d.extractRemoteData(b),a.success(b)}})))},extractRemoteData:function(a){var b=c.options.get(),d=c.isDefined(a,b.resultsProperty)?a[b.resultsProperty]:a;return"string"==typeof d&&0===d.indexOf("[{")&&(d=JSON.parse(d)),d&&d.options&&c.options.set($.extend({},b,d.options)),c.isObject(d)?d:[]},relativesData:function(){var a=c.options.get("relatives"),b={};return a&&(b.relatives={},a.each(function(){var a=$(this),c=a.attr("name").split("][").join("-").split("]").join("-").split("[").join("-").replace(/^\|+|\-+$/g,"");b.relatives[c]=a.val()})),b}},this.search={get:function(a,d,e){var f=this,g=c.options.get();if(!g.searchDisabled){var h=c.cache.read(a);if(!h){if(b.trigger("before:flexdatalist.search",[a,d]),!c.isEmpty(a)){h=[];for(var i,j=f.split(a),k=0;k<d.length;k++)(i=d[k],!c.isDup(i))&&(i=f.matches(i,j),i&&h.push(i))}c.cache.write(a,h,2),b.trigger("after:flexdatalist.search",[a,d,h])}}else h=d;e(h)},matches:function(a,b){var d=$.extend({},a),e=[],f=c.options.get(),g=f.searchIn;if(0<b.length)for(var h,i=0;i<g.length;i++)if(h=g[i],c.isDefined(a,h)&&a[h]){for(var j,k=a[h].toString(),l=k,m=this.split(k),n=0;n<b.length;n++)j=b[n],this.find(j,m)&&(e.push(j),l=this.highlight(j,l));l!==k&&(d[h+"_highlight"]=this.highlight(l))}return!(0===e.length||f.searchByWord&&e.length<b.length-1)&&d},highlight:function(a,b){return b?b.replace(new RegExp(a,c.options.get("searchContain")?"ig":"i"),"|:|$&|::|"):(a=a.split("|:|").join("<span class=\"highlight\">"),a.split("|::|").join("</span>"))},find:function(a,b){for(var d,e=c.options.get(),f=0;f<b.length;f++){if(d=b[f],d=this.normalizeString(d),a=this.normalizeString(a),e.searchEqual)return d==a;if(e.searchContain?0<=d.indexOf(a):0===d.indexOf(a))return!0}return!1},split:function(a){if("string"==typeof a&&(a=[$.trim(a)]),c.options.get("searchByWord"))for(var b,d=0;d<a.length;d++)if(b=$.trim(a[d]),0<b.indexOf(" ")){var e=b.split(" ");$.merge(a,e)}return a},normalizeString:function(a){if("string"==typeof a){var b=c.options.get("normalizeString");return"function"==typeof b&&(a=b(a)),a.toUpperCase()}return a}},this.results={show:function(a){var d=this,e=c.options.get();if(this.remove(!0),!!a){if(0===a.length)return void this.empty(e.noResultsText);var f=this.container();e.groupBy?(a=this.group(a),Object.keys(a).forEach(function(b){var g=a[b],h=e.groupBy,i=c.results.highlight(g[0],h,b),j=$("<li>").addClass("group").append($("<span>").addClass("group-name").html(i)).append($("<span>").addClass("group-item-count").text(" "+g.length)).appendTo(f);d.items(g,f)})):this.items(a,f);var g=f.find("li:not(.group)");g.on("click",function(){var a=$(this).data("item");a&&(c.fvalue.extract(a),d.remove(),b.trigger("select:flexdatalist",[a,e]))}).hover(function(){g.removeClass("active"),$(this).addClass("active").trigger("active:flexdatalist.results",[$(this).data("item")])},function(){$(this).removeClass("active")}),e.focusFirstResult&&g.filter(":first").addClass("active")}},empty:function(a){if(!c.isEmpty(a)){var b=this.container(),d=h.val();a=a.split("{keyword}").join(d),$("<li>").addClass("item no-results").append(a).appendTo(b)}},items:function(a,d){var e=c.options.get("maxShownResults");b.trigger("show:flexdatalist.results",[a]);for(var f=0;f<a.length&&!(0<e&&e===f);f++)this.item(a[f]).appendTo(d);b.trigger("shown:flexdatalist.results",[a])},item:function(a){for(var b,d=$("<li>").data("item",a).addClass("item"),e=c.options.get(),f=e.visibleProperties,g=0;g<f.length;g++){if(b=f[g],-1<b.indexOf("{")){var h=c.fvalue.placeholders.replace(a,b),i=c.fvalue.placeholders.parse(b);j=$("<span>").addClass("item item-"+Object.values(i).join("-")).html(h+" ").appendTo(d)}else{if(e.groupBy&&e.groupBy===b||!c.isDefined(a,b))continue;var j={};if(b===e.iconProperty)j=$("<img>").addClass("item item-"+b).attr("src",a[b]);else{var k=c.results.highlight(a,b);j=$("<span>").addClass("item item-"+b).html(k+" ")}}j.appendTo(d)}return d},container:function(){var a=b;i&&(a=i);var d=$("ul.widgetMainCP.flexdatalist-results");return 0===d.length&&(d=$("<ul>").addClass("widgetMainCP flexdatalist-results ").appendTo("body").attr("id",h.attr("id")+"-results").css({"border-color":a.css("border-left-color"),"border-width":"1px","border-bottom-left-radius":a.css("border-bottom-left-radius"),"border-bottom-right-radius":a.css("border-bottom-right-radius")}).data({target:i?i:h,input:b}),c.position(h)),d},group:function(a){for(var b,d=[],e=c.options.get("groupBy"),f=0;f<a.length;f++)if(b=a[f],c.isDefined(b,e)){var g=b[e];c.isDefined(d,g)||(d[g]=[]),d[g].push(b)}return d},highlight:function(a,b,d){return c.isDefined(a,b+"_highlight")?a[b+"_highlight"]:c.isDefined(a,b)?a[b]:d},remove:function(a){var c="ul.widgetMainCP.flexdatalist-results";a&&(c="ul.widgetMainCP.flexdatalist-results li"),b.trigger("remove:flexdatalist.results"),$(c).remove(),b.trigger("removed:flexdatalist.results")}},this.cache={write:function(a,b,d,e){if(c.cache.isSupported()){a=this.keyGen(a,void 0,e);var f={value:b,timestamp:c.unixtime(),lifetime:!!d&&d};localStorage.setItem(a,JSON.stringify(f))}},read:function(a,b){if(c.cache.isSupported()){a=this.keyGen(a,void 0,b);var d=localStorage.getItem(a);if(d){var e=JSON.parse(d);if(!this.expired(e))return e.value;localStorage.removeItem(a)}}return null},delete:function(a,b){c.cache.isSupported()&&(a=this.keyGen(a,void 0,b),localStorage.removeItem(a))},clear:function(){if(c.cache.isSupported()){for(var a in localStorage)(-1<a.indexOf(g)||-1<a.indexOf("global"))&&localStorage.removeItem(a);localStorage.clear()}},gc:function(){if(c.cache.isSupported())for(var a in localStorage)if(-1<a.indexOf(g)||-1<a.indexOf("global")){var b=localStorage.getItem(a);b=JSON.parse(b),this.expired(b)&&localStorage.removeItem(a)}},isSupported:function(){if(c.options.get("cache"))try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}return!1},expired:function(a){if(a.lifetime){var b=c.unixtime()-a.timestamp;return a.lifetime<=b}return!1},keyGen:function(a,b,c){"object"==typeof a&&(a=JSON.stringify(a));var d,e,f=b===void 0?2166136261:b;for(d=0,e=a.length;d<e;d++)f^=a.charCodeAt(d),f+=(f<<1)+(f<<4)+(f<<7)+(f<<8)+(f<<24);return(c?"global":g)+("0000000"+(f>>>0).toString(16)).substr(-8)}},this.options={init:function(){var a=$.extend({},e,b.data(),{multiple:null===e.multiple?b.is("[multiple]"):e.multiple,disabled:null===e.disabled?b.is("[disabled]"):e.disabled,originalValue:c.value});return this.set(a),a},get:function(a){var d=b.data("flexdatalist");return a?c.isDefined(d,a)?d[a]:null:d?d:{}},set:function(a,d){var e=this.get();return c.isDefined(e,a)&&c.isDefined(d)?e[a]=d:c.isObject(a)&&(e=this._normalize(a)),b.data("flexdatalist",e),b},_normalize:function(a){if(a.searchIn=c.csvToArray(a.searchIn),a.relatives=a.relatives&&0<$(a.relatives).length?$(a.relatives):null,a.textProperty=null===a.textProperty?a.searchIn[0]:a.textProperty,a.visibleProperties=c.csvToArray(a.visibleProperties,a.searchIn),"*"===a.valueProperty&&a.multiple&&!a.selectionRequired)throw new Error("Selection must be required for multiple, JSON fields!");return a}},this.position=function(){var a=$("ul.widgetMainCP.flexdatalist-results"),b=a.data("target");0<a.length&&a.css({width:b.outerWidth()+"px",top:b.offset().top+b.outerHeight()+"px",left:b.offset().left+"px"})},this.fdisabled=function(a){if(this.isDefined(a)){if(b.prop("disabled",a),h.prop("disabled",a),i){i.css("background-color",b.css("background-color"));var c=i.find("li .fdl-remove"),d=i.find("li.input-container");a?(i.addClass("disabled"),0<c.length&&d.hide(),c.hide()):(i.removeClass("disabled"),d.show(),c.show())}this.options.set("disabled",a)}return this.options.get("disabled")},this.isDup=function(a){return!this.options.get("allowDuplicateValues")&&0<f.length&&-1<f.indexOf(this.fvalue.value(a))},this.keyNum=function(a){return a.which||a.keyCode},this.isEmpty=function(a){if(!c.isDefined(a))return!0;return!(null!==a)||!0!==a&&(!(0!==this.length(a))||!(""!==$.trim(a)))},this.isObject=function(a){return a&&"object"==typeof a},this.length=function(a){if(this.isObject(a))return Object.keys(a).length;return"number"==typeof a||"number"==typeof a.length?a.toString().length:0},this.isDefined=function(a,b){var c="undefined"!=typeof a;return c&&"undefined"!=typeof b?"undefined"!=typeof a[b]:c},this.unixtime=function(a){var b=new Date;return a&&(b=new Date(a)),Math.round(b.getTime()/1e3)},this.csvToArray=function(a,b){return 0===a.length?b:"string"==typeof a?a.split(c.options.get("valuesSeparator")):a},this.debug=function(a,d){var e=c.options.get();e.debug&&(!d&&(d={}),a="Flexdatalist: "+a,console.warn(a),console.log($.extend({inputName:b.attr("name"),options:e},d)),console.log("--- /flexdatalist ---"))},this.init()})},jQuery(function(a){var b=a(document);b.data("flexdatalist")||a(document).mouseup(function(b){var c=a(".widgetMainCP.flexdatalist-results"),d=c.data("target");d&&d.is(":focus")||c.is(b.target)||0!==c.has(b.target).length||c.remove()}).keydown(function(b){var c=a(".widgetMainCP.flexdatalist-results"),d=c.find("li"),e=d.filter(".active"),f=e.index(),g=d.length,h=b.which||b.keyCode;if(0!==g){if(27===h)return void c.remove();if(13===h)b.preventDefault(),e.click();else if(40===h||38===h){b.preventDefault(),40===h?f<g&&0<e.nextAll(".item").first().length?e=e.removeClass("active").nextAll(".item").first().addClass("active"):e=d.removeClass("active").filter(".item:first").addClass("active"):38===h&&(0<f&&0<e.prevAll(".item").first().length?e=e.removeClass("active").prevAll(".item").first().addClass("active"):e=d.removeClass("active").filter(".item:last").addClass("active")),e.trigger("active:flexdatalist.results",[e.data("item")]);var i=(0===e.prev().length?e:e.prev()).position().top;c.animate({scrollTop:i+c.scrollTop()},100)}}}).data("flexdatalist",!0),jQuery("input.flexdatalist:not(.flexdatalist-set):not(.autodiscover-disabled)").flexdatalist()}),function(a){var b=a.fn.val;a.fn.val=function(a){var c=0<this.length&&"undefined"!=typeof this[0].fvalue;return"undefined"==typeof a?c?this[0].fvalue.get(!0):b.call(this):c?this[0].fvalue.set(a):b.call(this,a)}}(jQuery);let pathUrl="https://www.cekpengiriman.com/widget/data/",url_getSubdistrict="https://www.cekpengiriman.com/widget/data/subdistrict.php",url_getCity="https://www.cekpengiriman.com/widget/data/city.php",url_getCountry="https://www.cekpengiriman.com/widget/data/country.php";$(".tabs .tab-link").click(function(){let a=$(this).attr("data-tab");$(".tabs .tab-link").removeClass("current"),$(".tab-content").removeClass("current"),$(this).addClass("current"),$("#"+a).addClass("current")});function getUrlVars(){var a={},b=window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,d){a[c]=d});return a}string_to_array=function(a){return a.trim().split(",")},$("#domestik #weightDomestik,#mancanegara #weightMancanegara").keypress(function(a){if(8!=a.which&&0!=a.which&&(48>a.which||57<a.which))return!1});let subdistrict=function(a){localStorage.getItem("getSubdistrict")?a($.parseJSON(localStorage.getItem("getSubdistrict"))):$.ajax({url:url_getSubdistrict,type:"GET"}).done(function(b){var c=$.parseJSON(b);localStorage.setItem("getSubdistrict",b),a(c)})};subdistrict(function(a){let b=JSON.stringify(a),c=JSON.parse(b),e=c.rajaongkir.results;$(".flexdatalistGetCity").flexdatalist({minLength:2,valueProperty:"subdistrict_id",selectionRequired:!0,visibleProperties:["subdistrict_name","city"],searchIn:["subdistrict_name","city"],data:e,searchContain:!0})});let city=function(a){localStorage.getItem("getCity")?a($.parseJSON(localStorage.getItem("getCity"))):$.ajax({url:url_getCity,type:"GET"}).done(function(b){var c=$.parseJSON(b);localStorage.setItem("getCity",b),a(c)})};city(function(a){let b=JSON.stringify(a),c=JSON.parse(b),e=c.rajaongkir.results;$(".flexdatalistGetOriginCountry").flexdatalist({minLength:2,valueProperty:"city_id",selectionRequired:!0,visibleProperties:["city_name","type"],searchIn:"city_name",data:e,searchContain:!0})});let getCountry=function(a){localStorage.getItem("getCountry")?a($.parseJSON(localStorage.getItem("getCountry"))):$.ajax({url:url_getCountry,type:"GET"}).done(function(b){var c=$.parseJSON(b);localStorage.setItem("getCountry",b),a(c)})};getCountry(function(a){let b=JSON.stringify(a),c=JSON.parse(b),e=c.rajaongkir.results;$(".flexdatalistGetCountry").flexdatalist({minLength:2,valueProperty:"country_id",selectionRequired:!0,visibleProperties:["country_name"],searchIn:"country_name",data:e,searchContain:!0})});let lacakResi=function(){$("#resi .action button").on("click",function(){let a=encodeURIComponent($("#resi #nomor").val()),b=$("#resi #kurir").val();if(!!(a&&5<a.length)||alert("Nomor resi salah!"),!!b||alert("Kurir tidak dikenal!"),!!(a&&5<a.length&&b))return window.open("https://www.cekpengiriman.com/?tab=resi&resi="+a+"&kurir="+b),!1})};lacakResi();let ongkirDomestik=function(){$("#domestik .action button").on("click",function(){let a=$("#domestik #originDomestik").val(),b=$("#domestik #destinationDomestik").val(),c=$("#domestik #weightDomestik").val(),d=$("#domestik .showFilter input[type=checkbox]:checked").map(function(a,b){return $(b).val()}).get(),e=d.join(":");if(!!a||alert("Kota asal tidak tepat!"),!!b||alert("Kota tujuan tidak tepat!"),!!(1e3<=c&&5e4>=c)||alert("Berat paket minimal adalah 1.000 gram dan berat maksimal 50.000 gram"),4<d.length?(alert("Jumlah maksimal kurir yang harus dipilih adalah 4"),e=!1):1>d.length&&(alert("Jumlah minimal kurir yang harus dipilih adalah 1"),e=!1),!!(1e3<=c&&5e4>=c&&b&&a&&e))return window.open("https://www.cekpengiriman.com/?tab=domestik&origin="+a+"&destination="+b+"&weight="+c+"&kurir="+e),!1})};ongkirDomestik(),$("#mancanegara .action button").on("click",function(){let a=$("#mancanegara #originMancanegara").val(),b=$("#mancanegara #destinationMancanegara").val(),c=$("#mancanegara #weightMancanegara").val(),d=$("#mancanegara .showFilter input[type=checkbox]:checked").map(function(a,b){return $(b).val()}).get(),e=d.join(":");if(!!a||alert("Kota asal tidak tepat!"),!!b||alert("Negara tujuan tidak tepat!"),!!(1e3<=c&&99999>=c)||alert("Berat paket minimal adalah 1.000 gram dan berat maksimal 99.999 gram"),4<d.length?(alert("Jumlah maksimal kurir yang harus dipilih adalah 4"),e=!1):1>d.length&&(alert("Jumlah minimal kurir yang harus dipilih adalah 1"),e=!1),!!(1e3<=c&&99999>=c&&b&&a&&e))return window.open("https://www.cekpengiriman.com/?tab=mancanegara&origin="+a+"&destination="+b+"&weight="+c+"&kurir="+e),!1});var hours=2,now=new Date().getTime(),setupTime=localStorage.getItem("setupTime");null==setupTime?localStorage.setItem("setupTime",now):now-setupTime>7200000&&(localStorage.clear(),localStorage.setItem("setupTime",now)),$(".wrapFilter").click(function(a){$(".showFilterWrap").toggle(),a.stopPropagation()}),$(".showFilterWrap").click(function(a){a.stopPropagation()}),$(document).click(function(){$(".showFilterWrap").hide()});
